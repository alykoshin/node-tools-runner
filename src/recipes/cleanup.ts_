import path from 'path';
import fs from 'fs/promises';

async function removeDirRecursive(dirname: string) {
  return fs.rm(dirname, {recursive: true})
    .catch(e => {
      if (e.code !== 'ENOENT') throw e; // be silent if dir doesn't exists
    });
}

export async function cleanup() {
  await removeDirRecursive(TARGET_CONTENT_BASE_DIR);
  await removeDirRecursive(path.join(TARGET_NODE_MODULES_BASE_DIR, 'node_modules'));
}
